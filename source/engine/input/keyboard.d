/*
    Copyright Â© 2023, Luna the Foxgirl
    Distributed under the 2-Clause BSD License, see LICENSE file.
    
    Authors: Luna the Foxgirl
*/
module engine.input.keyboard;
import bindbc.sdl;

enum Key {    
	keyUnknown = 0,
	keyA = 4,
	keyB = 5,
	keyC = 6,
	keyD = 7,
	keyE = 8,
	keyF = 9,
	keyG = 10,
	keyH = 11,
	keyI = 12,
	keyJ = 13,
	keyK = 14,
	keyL = 15,
	keyM = 16,
	keyN = 17,
	keyO = 18,
	keyP = 19,
	keyQ = 20,
	keyR = 21,
	keyS = 22,
	keyT = 23,
	keyU = 24,
	keyV = 25,
	keyW = 26,
	keyX = 27,
	keyY = 28,
	keyZ = 29,
	key1 = 30,
	key2 = 31,
	key3 = 32,
	key4 = 33,
	key5 = 34,
	key6 = 35,
	key7 = 36,
	key8 = 37,
	key9 = 38,
	key0 = 39,
	keyReturn = 40,
	keyEscape = 41,
	keyBackspace = 42,
	keyTab = 43,
	keySpace = 44,
	keyMinus = 45,
	keyEquals = 46,
	keyLeftbracket = 47,
	keyRightbracket = 48,
	keyBackslash = 49,
	keyNonushash = 50,
	keySemicolon = 51,
	keyApostrophe = 52,
	keyGrave = 53,
	keyComma = 54,
	keyPeriod = 55,
	keySlash = 56,
	keyCapslock = 57,
	keyF1 = 58,
	keyF2 = 59,
	keyF3 = 60,
	keyF4 = 61,
	keyF5 = 62,
	keyF6 = 63,
	keyF7 = 64,
	keyF8 = 65,
	keyF9 = 66,
	keyF10 = 67,
	keyF11 = 68,
	keyF12 = 69,
	keyPrintscreen = 70,
	keyScrolllock = 71,
	keyPause = 72,
	keyInsert = 73,
	keyHome = 74,
	keyPageup = 75,
	keyDelete = 76,
	keyEnd = 77,
	keyPagedown = 78,
	keyRight = 79,
	keyLeft = 80,
	keyDown = 81,
	keyUp = 82,
	keyNumlockclear = 83,
	keyKpDivide = 84,
	keyKpMultiply = 85,
	keyKpMinus = 86,
	keyKpPlus = 87,
	keyKpEnter = 88,
	keyKp1 = 89,
	keyKp2 = 90,
	keyKp3 = 91,
	keyKp4 = 92,
	keyKp5 = 93,
	keyKp6 = 94,
	keyKp7 = 95,
	keyKp8 = 96,
	keyKp9 = 97,
	keyKp0 = 98,
	keyKpPeriod = 99,
	keyNonusbackslash = 100,
	keyApplication = 101,
	keyPower = 102,
	keyKpEquals = 103,
	keyF13 = 104,
	keyF14 = 105,
	keyF15 = 106,
	keyF16 = 107,
	keyF17 = 108,
	keyF18 = 109,
	keyF19 = 110,
	keyF20 = 111,
	keyF21 = 112,
	keyF22 = 113,
	keyF23 = 114,
	keyF24 = 115,
	keyExecute = 116,
	keyHelp = 117,
	keyMenu = 118,
	keySelect = 119,
	keyStop = 120,
	keyAgain = 121,
	keyUndo = 122,
	keyCut = 123,
	keyCopy = 124,
	keyPaste = 125,
	keyFind = 126,
	keyMute = 127,
	keyVolumeup = 128,
	keyVolumedown = 129,
	keyKpComma = 133,
	keyKpEqualsas400 = 134,
	keyInternational1 = 135,
	keyInternational2 = 136,
	keyInternational3 = 137,
	keyInternational4 = 138,
	keyInternational5 = 139,
	keyInternational6 = 140,
	keyInternational7 = 141,
	keyInternational8 = 142,
	keyInternational9 = 143,
	keyLang1 = 144,
	keyLang2 = 145,
	keyLang3 = 146,
	keyLang4 = 147,
	keyLang5 = 148,
	keyLang6 = 149,
	keyLang7 = 150,
	keyLang8 = 151,
	keyLang9 = 152,
	keyAlterase = 153,
	keySysreq = 154,
	keyCancel = 155,
	keyClear = 156,
	keyPrior = 157,
	keyReturn2 = 158,
	keySeparator = 159,
	keyOut = 160,
	keyOper = 161,
	keyClearagain = 162,
	keyCrsel = 163,
	keyExsel = 164,
	keyKp00 = 176,
	keyKp000 = 177,
	keyThousandsseparator = 178,
	keyDecimalseparator = 179,
	keyCurrencyunit = 180,
	keyCurrencysubunit = 181,
	keyKpLeftparen = 182,
	keyKpRightparen = 183,
	keyKpLeftbrace = 184,
	keyKpRightbrace = 185,
	keyKpTab = 186,
	keyKpBackspace = 187,
	keyKpA = 188,
	keyKpB = 189,
	keyKpC = 190,
	keyKpD = 191,
	keyKpE = 192,
	keyKpF = 193,
	keyKpXor = 194,
	keyKpPower = 195,
	keyKpPercent = 196,
	keyKpLess = 197,
	keyKpGreater = 198,
	keyKpAmpersand = 199,
	keyKpDblampersand = 200,
	keyKpVerticalbar = 201,
	keyKpDblverticalbar = 202,
	keyKpColon = 203,
	keyKpHash = 204,
	keyKpSpace = 205,
	keyKpAt = 206,
	keyKpExclam = 207,
	keyKpMemstore = 208,
	keyKpMemrecall = 209,
	keyKpMemclear = 210,
	keyKpMemadd = 211,
	keyKpMemsubtract = 212,
	keyKpMemmultiply = 213,
	keyKpMemdivide = 214,
	keyKpPlusminus = 215,
	keyKpClear = 216,
	keyKpClearentry = 217,
	keyKpBinary = 218,
	keyKpOctal = 219,
	keyKpDecimal = 220,
	keyKpHexadecimal = 221,
	keyLctrl = 224,
	keyLshift = 225,
	keyLalt = 226,
	keyLgui = 227,
	keyRctrl = 228,
	keyRshift = 229,
	keyRalt = 230,
	keyRgui = 231,
	keyMode = 257,
	keyAudionext = 258,
	keyAudioprev = 259,
	keyAudiostop = 260,
	keyAudioplay = 261,
	keyAudiomute = 262,
	keyMediaselect = 263,
	keyWww = 264,
	keyMail = 265,
	keyCalculator = 266,
	keyComputer = 267,
	keyAcSearch = 268,
	keyAcHome = 269,
	keyAcBack = 270,
	keyAcForward = 271,
	keyAcStop = 272,
	keyAcRefresh = 273,
	keyAcBookmarks = 274,
	keyBrightnessdown = 275,
	keyBrightnessup = 276,
	keyDisplayswitch = 277,
	keyKbdillumtoggle = 278,
	keyKbdillumdown = 279,
	keyKbdillumup = 280,
	keyEject = 281,
	keySleep = 282,
	keyApp1 = 283,
	keyApp2 = 284,
}

class KeyboardState {
private:
    bool[] states;

public:
    this(bool[] states) {
        this.states = states;
    }

    /**
        Gets whether a key is pressed
    */
    bool isKeyDown(Key key) {
        return cast(bool)states[cast(size_t)key];
    }

    /**
        Gets whether a key is released
    */
    bool isKeyUp(Key key) {
        return !cast(bool)states[cast(size_t)key];
    }
}

class Keyboard {
    static KeyboardState getState() {
        ubyte* stateArr;
        int stateArrSize;
        stateArr = SDL_GetKeyboardState(&stateArrSize);

        return new KeyboardState(cast(bool[])stateArr[0..stateArrSize].dup);
    }
}